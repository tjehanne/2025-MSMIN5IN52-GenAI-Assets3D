# Requirements for 2D Image Generation + 3D Model Generation
# Optimized for NVIDIA GPU (CUDA) - Tested on RTX 3060 Laptop GPU
# 
# INSTALLATION INSTRUCTIONS:
# 1. pip install -r requirements.txt
# 2. pip install "numpy<2.0"  # Important: Downgrade NumPy for compatibility
# 3. pip install xformers==0.0.27.post2 --index-url https://download.pytorch.org/whl/cu121
# 
# VERIFICATION: 
# python -c "import torch, xformers; print('CUDA:', torch.cuda.is_available(), '| xFormers:', xformers.__version__)"

# === CORE PYTORCH WITH CUDA SUPPORT ===
# Install PyTorch with CUDA support using extra index
--extra-index-url https://download.pytorch.org/whl/cu121
torch==2.4.0+cu121
torchvision==0.19.0+cu121
torchaudio==2.4.0+cu121

# === AI/ML MODELS & DIFFUSION ===
diffusers==0.35.2
transformers==4.57.1

# === PERFORMANCE & OPTIMIZATION ===
accelerate==1.11.0
# xformers==0.0.27.post2  # Install separately after requirements (see instructions above)

# === IMAGE PROCESSING ===
pillow>=10.0.0,<12.0  # Compatible with Gradio 5.x (requires <12.0)

# === ESSENTIAL DEPENDENCIES ===
numpy<2.0  # CRITICAL: NumPy 2.x is incompatible with PyTorch 2.4.0

# === WEB INTERFACE ===
gradio>=5.0.0

# === 3D GENERATION (TripoSR) ===
rembg  # Background removal for images
trimesh  # 3D mesh manipulation
xatlas  # UV mapping
PyMCubes  # Marching cubes algorithm (no CUDA compilation needed)
omegaconf  # Configuration management for TripoSR
einops  # Tensor operations
imageio[ffmpeg]  # Video rendering support
moderngl  # OpenGL rendering

# === AUTOMATIC DEPENDENCIES (included automatically) ===
# The following are installed automatically by the packages above:
# - huggingface-hub (for model downloads)
# - safetensors (for model loading)
# - regex (for tokenization)
# - requests (for downloads)
# - tqdm (for progress bars)
# - packaging (for version handling)
# - filelock (for concurrent access)
# - typing-extensions (for type hints)
# - sympy (for PyTorch symbolic math)
# - networkx (for PyTorch graphs)
# - jinja2 (for PyTorch templating)
# - fsspec (for file system operations)
# - mpmath (for symbolic math)

# === PERFORMANCE NOTES ===
# xFormers provides ~20% speedup and -15% VRAM usage
# Install AFTER requirements.txt:
#   pip install xformers==0.0.27.post2 --index-url https://download.pytorch.org/whl/cu121
#
# Triton is optional (NVIDIA only, not critical for this project)
# triton>=2.0.0

# === TESTED CONFIGURATION ===
# ✅ PyTorch: 2.4.0+cu121
# ✅ TorchVision: 0.19.0+cu121
# ✅ TorchAudio: 2.4.0+cu121
# ✅ xFormers: 0.0.27.post2
# ✅ NumPy: 1.26.x (< 2.0)
# ✅ CUDA: 12.1
# ✅ Python: 3.11.x
